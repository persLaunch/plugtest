
function getCookie(cname) { var name = cname + "="; var decodedCookie = decodeURIComponent(document.cookie); var ca = decodedCookie.split(';'); for(var i = 0; i <ca.length; i++) { var c = ca[i]; while (c.charAt(0) == ' ') { c = c.substring(1); } if (c.indexOf(name) == 0) {  return c.substring(name.length, c.length); } }  return ""; } 

window.dataLayer = window.dataLayer || []; 

function transactionComplete() { 
    var totalDiscount = 0; 
    var currencyCode = 'EUR'; 
    {% for discount in order.discounts %} 
        totalDiscount += {{ discount.savings | times: 0.01 }}; 
    {% endfor %} 
    return dataLayer.push({ 
        'event' : 'transactionComplete', 
            'transactionId': '{{order.order_number}}', 
            'transactionTotal': {{total_price | times: 0.01}}, 
            'transactionCurrency': currencyCode, 
            'transactionShipping': {{shipping_price | times: 0.01}}, 
            'transactionTax': {{tax_price | times: 0.01}}, 
            'transactionAffiliation': getCookie('affiliate_id'), 
            'transactionProducts': [ 
            {% for line_item in line_items %} 
                { 
                'sku': '{{line_item.product_id}}', 
                'name': '{{line_item.title}}', 
                'category': '{{line_item.type}}', 
                'price': {{line_item.price | times: 0.01}}, 
                'quantity': {{line_item.quantity}}, 
                'currency': currencyCode, 
                }, 
            {% endfor %}] 
    }); 
}; 
{% if first_time_accessed %} 
    transactionComplete(); 
{% endif %} 
//# sourceMappingURL=conversion_script.min.js
